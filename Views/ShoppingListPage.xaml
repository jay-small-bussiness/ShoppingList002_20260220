<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:ShoppingList002.ViewModels"
             xmlns:local="clr-namespace:ShoppingList002.Views"
             x:Class="ShoppingList002.Views.ShoppingListPage"
             Title="è²·ã„ç‰©ãƒªã‚¹ãƒˆ"
             Loaded="OnPageLoaded">
    <Grid>
        <Grid RowDefinitions="*,Auto"
              Grid.Row="0">
            <!-- ã“ã‚ŒãŒé€šå¸¸ã®ç”»é¢ -->
            <!--<StackLayout>
            <Grid RowDefinitions="*,Auto">-->
            <!-- ä¸Šï¼šã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«, ä¸‹ï¼šå›ºå®š -->

            <!-- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ãªãƒªã‚¹ãƒˆ -->
            <CollectionView Grid.Row="0"
                    ItemsSource="{Binding Items}"
                    VerticalOptions="FillAndExpand">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="5" Margin="2" BackgroundColor="{Binding BackgroundColor}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <VerticalStackLayout Grid.Column="0">
                                    <VerticalStackLayout.GestureRecognizers>
                                        <TapGestureRecognizer
                                            Command="{Binding 
                                                Source={RelativeSource AncestorType={x:Type local:ShoppingListPage}}, 
                                                Path=BindingContext.MarkAsPurchasedCommand}"
                                            CommandParameter="{Binding .}" />

                                        <!--Tapped="OnItemTapped"-->
                                        <!--<TapGestureRecognizer
                                            
                                            Command="{Binding 
                                                Source={RelativeSource 
                                                AncestorType={x:Type local:ShoppingListPage}}, 
                                                Path=BindingContext.MarkAsPurchasedCommand}"
                                            CommandParameter="{Binding ItemId}" />-->
                                    </VerticalStackLayout.GestureRecognizers>
                                    <Label Text="{Binding Name}" FontSize="20" />
                                    <Label Text="{Binding Detail}" FontSize="15" TextColor="DarkSlateGray" />
                                    <Label Text="{Binding CategoryTitle}" FontSize="10" TextColor="MediumVioletRed" />
                                </VerticalStackLayout>
                                <Button Grid.Column="1"
                                Text="âœ”"
                                Padding="5"
                                Command="{Binding Source={RelativeSource AncestorType={x:Type local:ShoppingListPage}}, Path=BindingContext.MarkAsPurchasedCommand}"
                                CommandParameter="{Binding ItemId}" />
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- ä¸‹éƒ¨å›ºå®šãƒœã‚¿ãƒ³ -->
            <HorizontalStackLayout Grid.Row="1"
                Padding="10"
                Spacing="10"
                HorizontalOptions="Center">
                <Button Text="ðŸ”ãƒœã‚¤ã‚¹æ¤œç´¢"
                    Command="{Binding OpenVoiceSearchCommand}"
                    BackgroundColor="LightBlue"
                    TextColor="Black"
                    CornerRadius="10" />
                <Button Text="ðŸ“‚ ï½¶ï¾ƒï½ºï¾žï¾˜ï¾˜ï½½ï¾„"
                    BackgroundColor="LightSeaGreen"
                    Command="{Binding GoToCategoryPageCommand}" />
                <!--Clicked="OnGoToCandidatesClicked" />-->
                <Button Text="âª å–ã‚Šæ¶ˆã—"
                    BackgroundColor="LightCoral"
                    Command="{Binding UndoLastPurchasedCommand}" />
            </HorizontalStackLayout>
            <!-- åŠé€æ˜Žã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
            <Grid x:Name="TutorialOverlaySL01"
                BackgroundColor="#88000000"
                IsVisible="False">
                <Frame x:Name="TutorialFrame"
                    Padding="10"
                    BackgroundColor="White"
                    CornerRadius="10"
                    Margin="20">
                    <Label x:Name="TutorialTextLabel"
                    FontSize="Medium"
                    TextColor="Black" />
                </Frame>
            </Grid>
        </Grid>
    </Grid>
</ContentPage>